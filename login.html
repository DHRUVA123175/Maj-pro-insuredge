<!DOCTYPE html> 
<html lang="en"> 
<head>
   <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
   <title>Login | InsurEdge AI Vehicle Insurance</title> 
   <link rel="stylesheet" href="styles.css" /> 
   <style>
   body{
     background: linear-gradient(45deg, #dd2476,plum, #1fa2ff, #a6ffcb);
      background-size: 400% 400%;
    animation: bgShift 7s ease infinite;
   }
    
   @keyframes bgShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

   .login-container { 
   max-width: 400px; 
   margin: 60px auto;
    background: linear-gradient(135deg,plum,lightblue,lightgreen);
    padding: 30px;
    border-radius: 10px;
    color: solid black;
    box-shadow: peachpuff;
    }

.login-container h2 {
  text-align: center;
  margin-bottom: 24px;
  color: orchid;
}

.login-container .subtitle {
  text-align: center;
  margin-bottom: 20px;
  color: #444;
  font-size: 0.9rem;
}

.login-container input {
  width: 100%;
  padding: 12px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 1rem;
}

.login-container input:focus {
  outline: none;
  border-color: #6a11cb;
  box-shadow: 0 0 5px rgba(106, 17, 203, 0.5);
}

.login-btn {
  width: 100%;
  background: linear-gradient(90deg, #f0c14b, #ffa41c);
  border: none;
  padding: 12px;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.3s;
}

.login-btn:hover {
  background: linear-gradient(90deg, #ffa41c, #f0c14b);
}

.form-footer {
  text-align: center;
  font-size: 0.9rem;
  margin-top: 10px;
}

.form-footer a {
  color: #0073bb;
  text-decoration: none;
}

</style> 
</head> 
<body> 
<!-- Navigation --> 
  <header class="navbar">
     <div class="navbar-logo">InsurEdge AI</div>
      <nav> 
      <ul class="navbar-menu"> 
      <li><a href="index.html">Home</a></li> 
      <li><a href="dashboard.html">Dashboard</a></li> 
      <li><a href="login.html" class="active">Login</a></li> 
      </ul> 
      </nav> 
      </header> 

<!-- Login Form --> 
      <div class="login-container"> 
        <h2>Login to Your Vehicle Insurance Account</h2>
        <p class="subtitle">Access your AI-powered vehicle insurance dashboard</p>
         <form action="#" method="POST">
           <input type="email" name="email" placeholder="Email Address" required /> 
           <input type="password" name="password" placeholder="Password" required />
            <button type="submit" class="login-btn">Login to Dashboard</button> 
            </form>
             <div class="form-footer"> 
             Don't have an account? <a href="register.html">Register for Vehicle Insurance</a> 
            </div> 
            </div> 
             <script>
          const form = document.querySelector("form");
          form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = form.email.value;
            const password = form.password.value;

            try {
              const res = await fetch("http://localhost:8000/api/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email, password }),
              });

              if (!res.ok) {
                const errorData = await res.json();
                throw new Error(errorData.error || "Invalid credentials");
              }
              const data = await res.json();
              localStorage.setItem("token", data.token);
              localStorage.setItem("name", data.name);
              localStorage.setItem("user_id", data.user_id);
              window.location.href = "dashboard.html";
            } catch (err) {
              alert("Login failed: " + err.message);
            }
          });
        </script>
        </body> 
        </html>